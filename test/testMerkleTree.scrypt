import "../scrypt/merkleTree.scrypt";

contract TestMerkleTree {
  public function testVerifyLeaf() {
    require(MerkleTree.verifyLeaf(b'214e63bf41490e67d34476778f6707aa6c8d2c8dccdf78ae11e40ee9f91e89a7',
      b'c942a06c127c2c18022677e888020afb174208d299354f3ecfedb124a1f3fa450019765cee9aa352e8db2578224e48cbe5d0161cd359a2a5388c102555f7285bb200',
      b'9538bbbd51f0a63e2e1ce261ee385845ef5f55926baa2c3508eef00a6a28872b'));

    require(MerkleTree.verifyLeaf(b'214e63bf41490e67d34476778f6707aa6c8d2c8dccdf78ae11e40ee9f91e89a7',
      b'c942a06c127c2c18022677e888020afb174208d299354f3ecfedb124a1f3fa450019765cee9aa352e8db2578224e48cbe5d0161cd359a2a5388c102555f7285bb2009f0247e5a690301cccc551bbb1b60abdbb7aadc8bc9d33b1becc68264230ab8e016b236ff4a4a59674f432eb7923b17d72a21e379e6c3cf1f0b5f993b78ebff00c01354d4e9e94023a3eefea84f09edfb3d7b91de54b4b1b3be7b03007de9f8f01ac01',
      b'16c9c0051e4bf038348e4f57aa96daa93be37791956c19ee61e6c819d4813cd7'));
  }

  public function testAddLeaf() {
    bytes newMerkleRoot = MerkleTree.addLeaf(b'06',
      b'88e443a340e2356812f72e04258672e5b287a177b66636e961cbc8d66b1e9b970011bf74b483d279afb400d9c93a7b1bffcf6fbabb406a343ff10a81fb4719f58f019538bbbd51f0a63e2e1ce261ee385845ef5f55926baa2c3508eef00a6a28872b00',
      b'219e4bd9719dd3a17f710eece987e8c7e802e372618c56ed4c8df5cb86431fa0',
      b'07');

    require(newMerkleRoot == b'376242176174a731dba9f67e5796d4ca25d35631ded56840a208e94f99497acc');
  }

  public function testUpdateLeaf() {
    bytes newMerkleRoot = MerkleTree.updateLeaf(b'03',
      b'08',
      b'214e63bf41490e67d34476778f6707aa6c8d2c8dccdf78ae11e40ee9f91e89a70119765cee9aa352e8db2578224e48cbe5d0161cd359a2a5388c102555f7285bb200a553aabe975f531d75023af597fa8aa09c9330dc0ceade085a6f3d792c683b560122ed36c71c669712970f53d639ccb10a4a8a7debb6ef11c65233313b12784f8501e92d954f7d52944b573b91b79dfd4e705ce617a9bf490237733d1088609ef13301',
      b'9df9ba7eb2519b77a95ddda47b20dbc31fb52a4c9ff779d64b34da41cb28a83e');

    require(newMerkleRoot == b'ac5ed5216836e8c7d39a9a7d160fc9bdbc20b09d688453abf71b55a2c45055c2');
  }
}
